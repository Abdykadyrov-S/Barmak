{% extends 'include/homepage.html' %}
{% load static %}
{% block content %}
{% include 'include/header.html' %}

<!-- filter offcanvas area start -->
<div class="tp-filter-offcanvas-area tp-filter-offcanvas-right">
   <div class="tp-filter-offcanvas-wrapper">
      <div class="tp-filter-offcanvas-close">
         <button type="button" class="tp-filter-offcanvas-close-btn filter-close-btn">
            <i class="fa-solid fa-xmark"></i>
            Закрыть
         </button>
      </div>
      <div class="tp-shop-sidebar">
         <!-- filter -->
         <div class="tp-shop-widget mb-35">
            <h3 class="tp-shop-widget-title no-border">Сортировать по ценам</h3>

            <div class="tp-shop-widget-content">
               <div class="tp-shop-widget-filter">
                  <form id="price-filter-form" method="get" action="{% url 'product_list' %}">
                     <div id="slider-range-offcanvas" class="mb-10"></div>
                     <div class="tp-shop-widget-filter-info d-flex align-items-center justify-content-between">
                        <span class="input-range">
                           <input name="min_price" type="text" id="amount-offcanvas" readonly>
                        </span>
                        <button class="tp-shop-widget-filter-btn" type="submit">Фильтр</button>
                     </div>
                  </form>
               </div>
            </div>
         </div>
         <!-- status -->
         <div class="tp-shop-widget mb-50">
            <h3 class="tp-shop-widget-title">Статус продукта</h3>

            <div class="tp-shop-widget-content">
               <div class="tp-shop-widget-checkbox">
                  <form id="price-filter-form" method="get" action="{% url 'product_list' %}">
                  <ul class="filter-items filter-checkbox">
                     <li class="filter-item checkbox">
                        <input name="popular" id="popular" type="checkbox">
                        <label for="popular">Популярные</label>
                     </li>
                     <li class="filter-item checkbox">
                        <input name="product_day" id="product_day" type="checkbox">
                        <label for="product_day">Товар дня</label>
                     </li>
                     <li class="filter-item checkbox">
                        <input name="new" id="new" type="checkbox">
                        <label for="new">Новые</label>
                     </li>
                     <li class="filter-item checkbox">
                        <input name="featured" id="featured" type="checkbox">
                        <label for="featured">Рекомендуемые</label></li>
                     </ul><!-- .filter-items -->

                     <button class="tp-shop-widget-result-btn" type="submit">Посмотреть результат</button>
                  
                  </form>
               </div>
            </div>
         </div>
         <!-- categories -->
         <div class="tp-shop-widget mb-50">
            <h3 class="tp-shop-widget-title">Категории</h3>

            <div class="tp-shop-widget-content">
               <div class="tp-shop-widget-categories">
                  <ul>
                     {% for category in footer_categories %}
                     <li><a href="{% url 'category_detail' category.slug %}">{{category.title}}</a></li>
                     {% endfor %}
                  </ul>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>
<!-- filter offcanvas area end -->

<main>

   <!-- breadcrumb area start -->
   <section class="breadcrumb__area include-bg pt-100 pb-50">
      <div class="container">
         <div class="row">
            <div class="col-xxl-12">
               <div class="breadcrumb__content p-relative z-index-1">
                  <h3 class="breadcrumb__title">{{category.title}}</h3>
                  <div class="breadcrumb__list">
                     <span><a href="{% url 'index' %}">Главная страница</a></span>
                     <span>{{category.title}}</span>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </section>
   <!-- breadcrumb area end -->

   <!-- shop area start -->
   <section class="tp-shop-area pb-120">
      <div class="container">
         <div class="row">
            <div class="col-xl-12">
               <div class="tp-shop-main-wrapper">

                  <div class="tp-shop-top mb-45">
                     <div class="row">
                        <div class="col-xl-6">
                           <div class="tp-shop-top-left d-flex align-items-center ">
                              <div class="tp-shop-top-tab tp-tab">
                                 <ul class="nav nav-tabs" id="productTab" role="tablist">
                                    <li class="nav-item" role="presentation">
                                       <button class="nav-link active" id="grid-tab" data-bs-toggle="tab"
                                          data-bs-target="#grid-tab-pane" type="button" role="tab"
                                          aria-controls="grid-tab-pane" aria-selected="true">
                                          <svg width="18" height="18" viewBox="0 0 18 18" fill="none"
                                             xmlns="http://www.w3.org/2000/svg">
                                             <path
                                                d="M16.3327 6.01341V2.98675C16.3327 2.04675 15.906 1.66675 14.846 1.66675H12.1527C11.0927 1.66675 10.666 2.04675 10.666 2.98675V6.00675C10.666 6.95341 11.0927 7.32675 12.1527 7.32675H14.846C15.906 7.33341 16.3327 6.95341 16.3327 6.01341Z"
                                                stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                             <path
                                                d="M16.3327 15.18V12.4867C16.3327 11.4267 15.906 11 14.846 11H12.1527C11.0927 11 10.666 11.4267 10.666 12.4867V15.18C10.666 16.24 11.0927 16.6667 12.1527 16.6667H14.846C15.906 16.6667 16.3327 16.24 16.3327 15.18Z"
                                                stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                             <path
                                                d="M7.33268 6.01341V2.98675C7.33268 2.04675 6.90602 1.66675 5.84602 1.66675H3.15268C2.09268 1.66675 1.66602 2.04675 1.66602 2.98675V6.00675C1.66602 6.95341 2.09268 7.32675 3.15268 7.32675H5.84602C6.90602 7.33341 7.33268 6.95341 7.33268 6.01341Z"
                                                stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                             <path
                                                d="M7.33268 15.18V12.4867C7.33268 11.4267 6.90602 11 5.84602 11H3.15268C2.09268 11 1.66602 11.4267 1.66602 12.4867V15.18C1.66602 16.24 2.09268 16.6667 3.15268 16.6667H5.84602C6.90602 16.6667 7.33268 16.24 7.33268 15.18Z"
                                                stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                                stroke-linejoin="round" />
                                          </svg>
                                       </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                       <button class="nav-link" id="list-tab" data-bs-toggle="tab"
                                          data-bs-target="#list-tab-pane" type="button" role="tab"
                                          aria-controls="list-tab-pane" aria-selected="false">
                                          <svg width="16" height="15" viewBox="0 0 16 15" fill="none"
                                             xmlns="http://www.w3.org/2000/svg">
                                             <path d="M15 7.11108H1" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round" />
                                             <path d="M15 1H1" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round" />
                                             <path d="M15 13.2222H1" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round" />
                                          </svg>
                                       </button>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </div>
                        <div class="col-xl-6">
                           <div class="tp-shop-top-right d-sm-flex align-items-center justify-content-xl-end">
                              <div class="tp-shop-top-filter">
                                 <button type="button" class="tp-filter-btn filter-open-btn">
                                    <span>
                                       <svg width="16" height="15" viewBox="0 0 16 15" fill="none"
                                          xmlns="http://www.w3.org/2000/svg">
                                          <path d="M14.9998 3.45001H10.7998" stroke="currentColor" stroke-width="1.5"
                                             stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
                                          <path d="M3.8 3.45001H1" stroke="currentColor" stroke-width="1.5"
                                             stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
                                          <path
                                             d="M6.5999 5.9C7.953 5.9 9.0499 4.8031 9.0499 3.45C9.0499 2.0969 7.953 1 6.5999 1C5.2468 1 4.1499 2.0969 4.1499 3.45C4.1499 4.8031 5.2468 5.9 6.5999 5.9Z"
                                             stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10"
                                             stroke-linecap="round" stroke-linejoin="round" />
                                          <path d="M15.0002 11.15H12.2002" stroke="currentColor" stroke-width="1.5"
                                             stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
                                          <path d="M5.2 11.15H1" stroke="currentColor" stroke-width="1.5"
                                             stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
                                          <path
                                             d="M9.4002 13.6C10.7533 13.6 11.8502 12.5031 11.8502 11.15C11.8502 9.79691 10.7533 8.70001 9.4002 8.70001C8.0471 8.70001 6.9502 9.79691 6.9502 11.15C6.9502 12.5031 8.0471 13.6 9.4002 13.6Z"
                                             stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10"
                                             stroke-linecap="round" stroke-linejoin="round" />
                                       </svg>
                                    </span>
                                    Сортировать
                                 </button>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="tp-shop-items-wrapper tp-shop-item-primary">
                     <div class="tab-content" id="productTabContent">
                        <div class="tab-pane fade show active" id="grid-tab-pane" role="tabpanel"
                           aria-labelledby="grid-tab" tabindex="0">
                           <div class="row">
                              {% for product in products %}
                              <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6">
                                 <div class="tp-product-item-2 mb-40">
                                    <div class="tp-product-thumb-2 p-relative z-index-1 fix w-img">
                                       <a href="{% url 'product_detail' product.id %}">
                                          <img src="{{ product.image.url}}" alt="">
                                       </a>
                                    </div>
                                    <div class="tp-product-content-2 pt-15">
                                       <div class="tp-product-tag-2">
                                          <a href="{% url 'product_detail' product.id %}">{{ product.title }}</a>
                                       </div>
                                       
                                       <div class="tp-product-rating-icon tp-product-rating-icon-2">
                                          <span><i class="fa-solid fa-star"></i></span>
                                          <span><i class="fa-solid fa-star"></i></span>
                                          <span><i class="fa-solid fa-star"></i></span>
                                          <span><i class="fa-solid fa-star"></i></span>
                                          <span><i class="fa-solid fa-star"></i></span>
                                       </div>
                                       <div class="tp-product-price-wrapper-2">
                                          {% if product.old_price %}
                                          <span class="tp-product-price old-price">{{product.old_price}}</span>
                                          {% endif %}
                                          <span class="tp-product-price-2 new-price">{{product.price}} сом</span>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                              {% endfor %}
                           </div>
                        </div>
                        <div class="tab-pane fade" id="list-tab-pane" role="tabpanel" aria-labelledby="list-tab"
                           tabindex="0">
                           <div class="tp-shop-list-wrapper tp-shop-item-primary mb-70">
                              <div class="row">
                                 <div class="col-xl-12">
                                    {% for product in products %}
                                    <div class="tp-product-list-item d-md-flex">
                                       <div class="tp-product-list-thumb p-relative fix">
                                          <a href="{% url 'product_detail' product.id %}">
                                             <img src="{{ product.image.url}}" style="width: 300px; height: 250px;"
                                                alt="">
                                          </a>

                                       </div>
                                       <div class="tp-product-list-content">
                                          <div class="tp-product-content-2 pt-15">
                                             <h3 class="tp-product-title-2">
                                                <a href="{% url 'product_detail' product.id %}">{{ product.title }}</a>
                                             </h3>
                                             <div class="tp-product-rating-icon tp-product-rating-icon-2">
                                                <span><i class="fa-solid fa-star"></i></span>
                                                <span><i class="fa-solid fa-star"></i></span>
                                                <span><i class="fa-solid fa-star"></i></span>
                                                <span><i class="fa-solid fa-star"></i></span>
                                                <span><i class="fa-solid fa-star"></i></span>
                                             </div>
                                             <div class="tp-product-price-wrapper-2">
                                                {% if product.old_price %}
                                                <span class="tp-product-price old-price">{{product.old_price}}</span>
                                                {% endif %}
                                                <span class="tp-product-price-2 new-price">{{product.price}} сом</span>
                                             </div>
                                             <p>{{ product.description | truncatewords:10 }}</p>
                                             <div class="tp-product-list-add-to-cart">
                                                <button type="button"
                                                   class="tp-product-action-btn tp-product-compare-btn"
                                                   data-product-id="{{ product.id }}">
                                                   <svg width="17" height="21" viewBox="0 0 17 21" fill="none"
                                                      xmlns="http://www.w3.org/2000/svg">
                                                      <path d="M12.6666 1L16 4.33333L12.6666 7.66667"
                                                         stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                                         stroke-linejoin="round" />
                                                      <path
                                                         d="M1 9.3335V7.66683C1 6.78277 1.35119 5.93493 1.97631 5.30981C2.60143 4.68469 3.44928 4.3335 4.33333 4.3335H16"
                                                         stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                                         stroke-linejoin="round" />
                                                      <path d="M4.33333 19.3332L1 15.9998L4.33333 12.6665"
                                                         stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                                         stroke-linejoin="round" />
                                                      <path
                                                         d="M16 11V12.6667C16 13.5507 15.6488 14.3986 15.0237 15.0237C14.3986 15.6488 13.5507 16 12.6667 16H1"
                                                         stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                                         stroke-linejoin="round" />
                                                   </svg>

                                                   <span class="tp-product-tooltip">Добавить в список
                                                      сравнения</span>
                                                </button>

                                                <button class="tp-product-list-add-to-cart-btn"><a
                                                      href="{% url 'product_detail' product.id %}">Подробнее</a></button>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                    {% endfor %}
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </section>
   <!-- shop area end -->
</main>


{% include 'include/footer.html' %}
{% endblock %}